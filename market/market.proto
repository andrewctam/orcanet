syntax = "proto3";

import "google/protobuf/empty.proto";

option go_package = "orcanet/market/market";

package market;

service Market {
  rpc RequestFile (FileRequest) returns (FileResponse) {}
  rpc CheckRequests (CheckRequest) returns (Requests) {}
  rpc CheckHolders (CheckHolder) returns (ListReply) {}
  rpc RegisterFile (RegisterRequest) returns (google.protobuf.Empty) {}
}

message User {
  string id = 1;
  string name = 2;
}

message FileRequest {
  User user = 1;
  string fileHash = 2;
  int32 bid = 3;
}

message RegisterRequest {
  User user = 1;
  string fileHash = 2;
}

message CheckRequest {
  string fileHash = 1;
}

message CheckHolder {
  string fileHash = 1;
}

message FileResponse {
  bool exists = 1;
  string message = 2;
}

message Requests {
  repeated FileRequest requests = 1;
}

message ListReply {
  repeated string strings = 1;
}
